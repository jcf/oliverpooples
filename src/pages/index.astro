---
import "../styles/global.css";
import "@tailwindplus/elements";

import { Image } from "astro:assets";

import Plausible from "../components/Plausible.astro";

import img1 from "../assets/images/IMG_4732.jpeg";
import img2 from "../assets/images/IMG_4733.jpeg";
import img3 from "../assets/images/IMG_4734.jpeg";

const products = [
  { id: "modal1", name: "Premium White Edge™", price: "£663", image: img1, rating: "0.8" },
  { id: "modal2", name: "Luxury Border Collection™", price: "£663", image: img2, rating: "0.5" },
  { id: "modal3", name: "The Pooples Special™", price: "£663", image: img3, rating: "0.2" },
];
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>Oliver Pooples - Premium Defects</title>
    {import.meta.env.PROD === true && <Plausible />}
  </head>
  <body class="bg-gray-50 p-8">
    <div class="mx-auto max-w-6xl">
      <h1 class="mb-8 text-center text-4xl font-bold">Oliver Pooples</h1>
      <p class="mb-12 text-center text-xl text-gray-600">
        Luxury Disappointments
      </p>

      <div class="grid grid-cols-1 gap-6 md:grid-cols-3">
        {
          products.map((product) => (
            <button
              type="button"
              command="show-modal"
              commandfor={product.id}
              class="group cursor-pointer text-left"
            >
              <div class="aspect-square overflow-hidden rounded-lg bg-gray-200">
                <Image
                  src={product.image}
                  alt={product.name}
                  class="h-full w-full object-cover transition-transform group-hover:scale-105"
                />
              </div>
              <h3 class="mt-4 font-medium">{product.name}</h3>
              <p class="text-gray-600">{product.price}</p>
            </button>
          ))
        }
      </div>
    </div>

    {/* Individual modals for each product */}
    {
      products.map((product) => (
        <el-dialog>
          <dialog id={product.id} class="relative z-10 backdrop:bg-transparent">
            <el-dialog-backdrop class="fixed inset-0 hidden bg-gray-500/75 transition-opacity data-closed:opacity-0 data-enter:duration-300 data-enter:ease-out data-leave:duration-200 data-leave:ease-in md:block"></el-dialog-backdrop>

            <div tabindex="0" class="fixed inset-0 z-10 w-screen overflow-y-auto focus:outline-none">
              <div class="flex min-h-full items-stretch justify-center text-center md:items-center md:px-2 lg:px-4">
                <el-dialog-panel class="flex w-full transform text-left text-base transition data-closed:translate-y-4 data-closed:opacity-0 data-enter:duration-300 data-enter:ease-out data-leave:duration-200 data-leave:ease-in md:my-8 md:max-w-2xl md:px-4 data-closed:md:translate-y-0 data-closed:md:scale-95 lg:max-w-4xl">
                  <div class="relative flex w-full items-center overflow-hidden bg-white px-4 pt-14 pb-8 shadow-2xl sm:px-6 sm:pt-8 md:p-6 lg:p-8">
                    <button type="button" command="close" commandfor={product.id} class="absolute top-4 right-4 text-gray-400 hover:text-gray-500 sm:top-8 sm:right-6 md:top-6 md:right-6 lg:top-8 lg:right-8">
                      <span class="sr-only">Close</span>
                      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" data-slot="icon" aria-hidden="true" class="size-6">
                        <path d="M6 18 18 6M6 6l12 12" stroke-linecap="round" stroke-linejoin="round" />
                      </svg>
                    </button>

                    <div class="grid w-full grid-cols-1 items-start gap-x-6 gap-y-8 sm:grid-cols-12 lg:gap-x-8">
                      <div class="sm:col-span-4 lg:col-span-5">
                        <Image 
                          src={product.image} 
                          alt={`${product.name} - Premium defect showcase`}
                          class="aspect-square w-full rounded-lg bg-gray-100 object-cover"
                        />
                      </div>
                      <div class="sm:col-span-8 lg:col-span-7">
                        <h2 class="text-2xl font-bold text-gray-900 sm:pr-12">{product.name}</h2>

                        <section aria-labelledby="information-heading" class="mt-3">
                          <h3 id="information-heading" class="sr-only">Product information</h3>

                          <p class="text-2xl text-gray-900">{product.price}</p>

                          <div class="mt-3">
                            <h4 class="sr-only">Reviews</h4>
                            <div class="flex items-center">
                              <div class="flex items-center">
                                {[1, 2, 3, 4, 5].map((star) => (
                                  <svg viewBox="0 0 20 20" fill="currentColor" data-slot="icon" aria-hidden="true" class={`size-5 shrink-0 ${star === 1 ? 'text-gray-400' : 'text-gray-200'}`}>
                                    <path d="M10.868 2.884c-.321-.772-1.415-.772-1.736 0l-1.83 4.401-4.753.381c-.833.067-1.171 1.107-.536 1.651l3.62 3.102-1.106 4.637c-.194.813.691 1.456 1.405 1.02L10 15.591l4.069 2.485c.713.436 1.598-.207 1.404-1.02l-1.106-4.637 3.62-3.102c.635-.544.297-1.584-.536-1.65l-4.752-.382-1.831-4.401Z" clip-rule="evenodd" fill-rule="evenodd" />
                                  </svg>
                                ))}
                              </div>
                              <p class="ml-2 text-sm text-gray-900">{product.rating} out of 5 stars</p>
                            </div>
                          </div>

                          <div class="mt-6">
                            <h4 class="sr-only">Description</h4>
                            <p class="text-sm text-gray-700">Experience the luxury of thick white edges inside your designer frames. Each pair uniquely flawed, ensuring no two disappointments are alike. Customer service that can't open JPEG attachments included at no extra charge.</p>
                          </div>
                        </section>

                        <section aria-labelledby="options-heading" class="mt-6">
                          <h3 id="options-heading" class="sr-only">Product options</h3>

                          <form>
                            <div>
                              <h4 class="text-sm font-medium text-gray-600">Defect Level</h4>

                              <fieldset aria-label="Choose a defect level" class="mt-2">
                                <div class="flex items-center gap-x-3">
                                  <div class="flex rounded-full outline -outline-offset-1 outline-black/10">
                                    <input type="radio" name="defect" value="minor" aria-label="Minor" class="size-8 appearance-none rounded-full bg-yellow-500 forced-color-adjust-none checked:outline-2 checked:outline-offset-2 checked:outline-yellow-500 focus-visible:outline-3 focus-visible:outline-offset-3" />
                                  </div>
                                  <div class="flex rounded-full outline -outline-offset-1 outline-black/10">
                                    <input type="radio" name="defect" value="major" checked aria-label="Major" class="size-8 appearance-none rounded-full bg-orange-500 forced-color-adjust-none checked:outline-2 checked:outline-offset-2 checked:outline-orange-500 focus-visible:outline-3 focus-visible:outline-offset-3" />
                                  </div>
                                  <div class="flex rounded-full outline -outline-offset-1 outline-black/10">
                                    <input type="radio" name="defect" value="catastrophic" aria-label="Catastrophic" class="size-8 appearance-none rounded-full bg-red-600 forced-color-adjust-none checked:outline-2 checked:outline-offset-2 checked:outline-red-600 focus-visible:outline-3 focus-visible:outline-offset-3" />
                                  </div>
                                </div>
                              </fieldset>
                            </div>

                            <div class="mt-6">
                              <button type="submit" disabled class="flex w-full items-center justify-center rounded-md border border-transparent bg-gray-400 px-8 py-3 text-base font-medium text-white cursor-not-allowed">Currently experiencing quality issues</button>
                            </div>

                            <p class="absolute top-4 left-4 text-center sm:static sm:mt-6">
                              <a href="mailto:support@oliverpeoples.com" class="font-medium text-indigo-600 hover:text-indigo-500">Contact support (4-day response time)</a>
                            </p>
                          </form>
                        </section>
                      </div>
                    </div>
                  </div>
                </el-dialog-panel>
              </div>
            </div>
          </dialog>
        </el-dialog>
      ))
    }
    <script>
      import "@tailwindplus/elements";
    </script>
  </body>
</html>